var Rum=new function(){var asyncParam="",validationTimeout=10,validationReady=!0;this.init=function(t,e){asyncParam=t,validationTimeout=e},this.id=function(t){return document.getElementById(t)},this.flash=function(t,e){if(this.id("messages")){var i=document.createElement("a"),n=document.createElement("li"),s=document.createTextNode(t);n.setAttribute("class",e),i.appendChild(document.createTextNode(" dismiss")),i.setAttribute("class","dismiss"),i.setAttribute("title","Dismiss"),addListener(i,"click",function(){n.style.display="none"}),n.appendChild(s),n.appendChild(i),this.id("messages").appendChild(n)}},this.unflashAll=function(){if(this.id("messages")){var t=this.id("messages").childNodes;for(i=0;i<t.length;i++)t[i].parentNode.removeChild(t[i])}},this.forward=function(t){location.href=t},this.getParams=function(t){var e="",i=t.getElementsByTagName("input"),n=t.getElementsByTagName("select");for(x=0;x<i.length;x++)e&&(e+="&"),e=e+i[x].getAttribute("name")+"="+i[x].value;for(x=0;x<n.length;x++)e&&(e+="&"),e=e+n[x].getAttribute("name")+"="+n[x].value;return e},this.sendAsync=function(t,e,i){http_request=this.createXMLHttpRequest(),this.sendAsyncWithCallback(http_request,t,e,i)},this.sendSync=function(t,e,i){if(null==i&&(i="GET"),null==e&&(e=""),"GET"==i.toUpperCase()&&e)t=t.indexOf("?")>-1?t+"&"+e:t+"?"+e,e="",location.href=t;else{e=e.split("&");var n=document.createElement("form");n.action=t+"/",n.method="POST",n.style.display="none";for(var s=0;s<e.length;s++){param=e[s].split("=");var o=document.createElement("input");o.setAttribute("name",param[0]),o.setAttribute("value",param[1]),n.appendChild(o)}document.body.appendChild(n),n.submit()}},this.submit=function(t){var e=evalFormResponse;return createFrame(t,e),!0},this.sendAsyncWithCallback=function(http_request,url,params,method,callback){null==method&&(method="GET"),params?params+="&"+asyncParam+"=1":params="?"+asyncParam+"=1","GET"==method.toUpperCase()&&params&&(url=url.indexOf("?")>-1?url+"&"+params:url+"?"+params,params=""),null!=callback&&eval("http_request.onreadystatechange="+callback),http_request.open(method,url,!0),http_request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),http_request.send(params)},this.evalAsync=function(t,e,i){http_request=this.createXMLHttpRequest(),null===http_request&&console.log("browser does not support HTTP Request");var n=function(){evalHttpResponse(http_request)};this.sendAsyncWithCallback(http_request,t,e,i,n)},this.documentLoaded=function(t,e){var i=document.getElementById(e)?document.getElementById(e):"",n=null;if(i.contentDocument)n=i.contentDocument;else{if(!i.contentWindow)return;n=i.contentWindow.document}"about:blank"!=n.location.href&&i.completeCallback(t,n.body.textContent)},this.assert=function(t,e){this.id(t)&&(-1===this.id(t).className.indexOf(" invalid")&&(this.id(t).className=this.id(t).className+" invalid"),setText(this.id(t+"__err"),e)),this.reset()},this.clear=function(t){this.id(t)&&(this.id(t+"__err")&&(this.id(t+"__err").style.display="none"),this.id(t).className=this.id(t).className.replace(" invalid","")),this.reset()},this.reset=function(){validationReady=!1,window.setTimeout("setValidationReady()",validationTimeout)},this.isReady=function(t){return hasText(this.id(t))?validationReady:!1},this.createXMLHttpRequest=function(){if(window.XMLHttpRequest)http_request=new XMLHttpRequest,http_request.overrideMimeType&&http_request.overrideMimeType("text/html");else if(window.ActiveXObject)try{http_request=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{http_request=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}return http_request?http_request:(alert("Cannot create XMLHTTP instance"),!1)},setValidationReady=function(){validationReady=!0},getHttpResponse=function(t){if(t&&4==t.readyState){if(200==t.status)return response=t.responseText;throw"Problem retrieving XML data"}},evalHttpResponse=function(http_request){eval(getHttpResponse(http_request))},evalFormResponse=function(formElement,response){eval(response),formElement.removeChild(Rum.id(formElement.getAttribute("id")+"__async")),formElement.setAttribute("target","")},createFrame=function(t,e){var i="f"+Math.floor(99999*Math.random()),n=document.createElement("DIV"),s=document.getElementById(t.getAttribute("id")+"__async_postback");s&&s.parentNode.removeChild(s),n.id=t.getAttribute("id")+"__async_postback",n.innerHTML='<iframe style="display:none" src="about:blank" id="'+i+'" name="'+i+'" onload="Rum.documentLoaded(Rum.id(\''+t.getAttribute("id")+"'), '"+i+"'); return true;\"></iframe>",document.body.appendChild(n);var o=document.getElementById(i);o.completeCallback=e;var r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name",asyncParam),r.setAttribute("value","1"),r.setAttribute("id",t.getAttribute("id")+"__async"),t.appendChild(r),t.setAttribute("target",i)},setText=function(t,e){if(t){if(t.hasChildNodes())for(;t.childNodes.length>=1;)t.removeChild(t.firstChild);var i=document.createElement("span");e.length>0?(i.appendChild(document.createTextNode(e)),t.style.display="block"):(i.appendChild(document.createTextNode("")),t.style.display="none"),t.appendChild(i)}},hasText=function(t){return t&&t.hasChildNodes()&&t.childNodes.length>=1&&t.childNodes[0].textContent.length>0?!0:null},addListener=function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i}};