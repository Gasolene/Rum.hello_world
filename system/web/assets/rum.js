var Rum=new function(){var asyncParam="",validationTimeout=10,validationReady=!0;this.init=function(e,t){asyncParam=e,validationTimeout=t},this.id=function(e){return document.getElementById(e)},this.flash=function(e,t){if(this.id("messages")){var s=document.createElement("a"),i=document.createElement("li"),a=document.createTextNode(e);i.setAttribute("class",t),s.appendChild(document.createTextNode(" dismiss")),s.setAttribute("class","dismiss"),s.setAttribute("title","Dismiss"),addListener(s,"click",function(){i.style.display="none"}),i.appendChild(a),i.appendChild(s),this.id("messages").appendChild(i)}},this.unflashAll=function(){if(this.id("messages")){var e=this.id("messages").childNodes;for(i=0;i<e.length;i++)e[i].parentNode.removeChild(e[i])}},this.forward=function(e){location.href=e},this.sendAsync=function(e,t,s){http_request=this.createXMLHttpRequest(),this.sendAsyncWithCallback(http_request,e,t,s)},this.sendSync=function(e,t,s){if(null==s&&(s="GET"),null==t&&(t=""),"GET"==s.toUpperCase()&&t)e=e.indexOf("?")>-1?e+"&"+t:e+"?"+t,t="",location.href=e;else{t=t.split("&");var i=document.createElement("form");i.action=e+"/",i.method="POST",i.style.display="none";for(var a=0;a<t.length;a++){param=t[a].split("=");var o=document.createElement("input");o.setAttribute("name",param[0]),o.setAttribute("value",param[1]),i.appendChild(o)}document.body.appendChild(i),i.submit()}},this.submit=function(e){var t=evalFormResponse;return createFrame(e,t),!0},this.sendAsyncWithCallback=function(http_request,url,params,method,callback){null==method&&(method="GET"),params?params+="&"+asyncParam+"=1":params="?"+asyncParam+"=1","GET"==method.toUpperCase()&&params&&(url=url.indexOf("?")>-1?url+"&"+params:url+"?"+params,params=""),null!=callback&&eval("http_request.onreadystatechange="+callback),http_request.open(method,url,!0),http_request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),http_request.send(params)},this.evalAsync=function(e,t,s){http_request=this.createXMLHttpRequest(),null===http_request&&console.log("browser does not support HTTP Request");var i=function(){evalHttpResponse(http_request)};this.sendAsyncWithCallback(http_request,e,t,s,i)},this.documentLoaded=function(e,t){var s=document.getElementById(t)?document.getElementById(t):"",i=null;if(s.contentDocument)i=s.contentDocument;else{if(!s.contentWindow)return;i=s.contentWindow.document}"about:blank"!=i.location.href&&s.completeCallback(e,i.body.textContent)},this.assert=function(e,t){this.id(e)&&(-1===this.id(e).className.indexOf(" invalid")&&(this.id(e).className=this.id(e).className+" invalid"),setText(this.id(e+"__err"),t)),this.reset()},this.clear=function(e){this.id(e)&&(this.id(e+"__err")&&(this.id(e+"__err").style.display="none"),this.id(e).className=this.id(e).className.replace(" invalid","")),this.reset()},this.reset=function(){validationReady=!1,window.setTimeout("setValidationReady()",validationTimeout)},this.isReady=function(e){return hasText(this.id(e))?validationReady:!1},this.createXMLHttpRequest=function(){if(window.XMLHttpRequest)http_request=new XMLHttpRequest,http_request.overrideMimeType&&http_request.overrideMimeType("text/html");else if(window.ActiveXObject)try{http_request=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{http_request=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}return http_request?http_request:(alert("Cannot create XMLHTTP instance"),!1)},setValidationReady=function(){validationReady=!0},getHttpResponse=function(e){if(e&&4==e.readyState){if(200==e.status)return response=e.responseText;throw"Problem retrieving XML data"}},evalHttpResponse=function(http_request){eval(getHttpResponse(http_request))},evalFormResponse=function(formElement,response){eval(response),formElement.removeChild(Rum.id(formElement.getAttribute("id")+"__async")),formElement.setAttribute("target","")},createFrame=function(e,t){var s="f"+Math.floor(99999*Math.random()),i=document.createElement("DIV"),a=document.getElementById(e.getAttribute("id")+"__async_postback");a&&a.parentNode.removeChild(a),i.id=e.getAttribute("id")+"__async_postback",i.innerHTML='<iframe style="display:none" src="about:blank" id="'+s+'" name="'+s+'" onload="Rum.documentLoaded(Rum.id(\''+e.getAttribute("id")+"'), '"+s+"'); return true;\"></iframe>",document.body.appendChild(i);var o=document.getElementById(s);o.completeCallback=t;var r=document.createElement("input");r.setAttribute("type","hidden"),r.setAttribute("name",asyncParam),r.setAttribute("value","1"),r.setAttribute("id",e.getAttribute("id")+"__async"),e.appendChild(r),e.setAttribute("target",s)},setText=function(e,t){if(e){if(e.hasChildNodes())for(;e.childNodes.length>=1;)e.removeChild(e.firstChild);var s=document.createElement("span");t.length>0?(s.appendChild(document.createTextNode(t)),e.style.display="block"):(s.appendChild(document.createTextNode("")),e.style.display="none"),e.appendChild(s)}},hasText=function(e){return e&&e.hasChildNodes()&&e.childNodes.length>=1&&e.childNodes[0].textContent.length>0?!0:null},addListener=function(e,t,s){e.addEventListener?e.addEventListener(t,s,!1):e.attachEvent?e.attachEvent("on"+t,s):e["on"+t]=s}};