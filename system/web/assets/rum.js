var Rum=new function(){var asyncParam="",validationTimeout=10,validationReady=!0;this.init=function(e,t){asyncParam=e,validationTimeout=t},this.id=function(e){return document.getElementById(e)},this.flash=function(e,t,i){if(i||(i=3e3),this.id("messages")){var n=document.createElement("li"),o=document.createTextNode(e);n.setAttribute("class",t),n.appendChild(o),this.id("messages").appendChild(n),setTimeout(function(){fadeOut(n)},i)}},this.unflashAll=function(){if(this.id("messages")){var e=this.id("messages").childNodes;for(i=0;i<e.length;i++)e[i].parentNode.removeChild(e[i])}},this.forward=function(e){location.href=e},this.getParams=function(e){var t="",i=e.getElementsByTagName("input"),n=e.getElementsByTagName("select");for(x=0;x<i.length;x++)"button"!=i[x].getAttribute("type")&&"submit"!=i[x].getAttribute("type")&&"image"!=i[x].getAttribute("type")&&(t&&(t+="&"),t=t+i[x].getAttribute("name")+"="+i[x].value);for(x=0;x<n.length;x++)t&&(t+="&"),t=t+n[x].getAttribute("name")+"="+n[x].value;return t},this.sendAsync=function(e,t,i){http_request=this.createXMLHttpRequest(),this.sendAsyncWithCallback(http_request,e,t,i)},this.sendSync=function(e,t,i){if(null==i&&(i="GET"),null==t&&(t=""),"GET"==i.toUpperCase()&&t)e=e.indexOf("?")>-1?e+"&"+t:e+"?"+t,t="",location.href=e;else{t=t.split("&");var n=document.createElement("form");n.action=e,n.method="POST",n.style.display="none";for(var o=0;o<t.length;o++){param=t[o].split("=");var a=document.createElement("input");a.setAttribute("name",param[0]),a.setAttribute("value",param[1]),n.appendChild(a)}document.body.appendChild(n),n.submit()}},this.submit=function(e){var t=evalFormResponse;return createFrame(e,t),!0},this.sendAsyncWithCallback=function(http_request,url,params,method,callback){null==method&&(method="GET"),params?params+="&"+asyncParam+"=1":params="?"+asyncParam+"=1","GET"==method.toUpperCase()&&params&&(url=url.indexOf("?")>-1?url+"&"+params:url+"?"+params,params=""),null!=callback&&eval("http_request.onreadystatechange="+callback),http_request.open(method,url,!0),http_request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),http_request.send(params)},this.evalAsync=function(e,t,i){http_request=this.createXMLHttpRequest(),null===http_request&&console.log("browser does not support HTTP Request");var n=function(){evalHttpResponse(http_request)};this.sendAsyncWithCallback(http_request,e,t,i,n)},this.documentLoaded=function(e,t){var i=document.getElementById(t)?document.getElementById(t):"",n=null;if(i.contentDocument)n=i.contentDocument;else{if(!i.contentWindow)return;n=i.contentWindow.document}"about:blank"!=n.location.href&&i.completeCallback(e,n.body.textContent)},this.assert=function(e,t){this.id(e)&&(-1===this.id(e).className.indexOf(" invalid")&&(this.id(e).className=this.id(e).className+" invalid"),setText(this.id(e+"__err"),t)),this.reset()},this.clear=function(e){this.id(e)&&(this.id(e+"__err")&&(this.id(e+"__err").style.display="none"),this.id(e).className=this.id(e).className.replace(" invalid","")),this.reset()},this.reset=function(){validationReady=!1,window.setTimeout("setValidationReady()",validationTimeout)},this.isReady=function(e){return hasText(this.id(e))?validationReady:!1},this.createXMLHttpRequest=function(){if(window.XMLHttpRequest)http_request=new XMLHttpRequest,http_request.overrideMimeType&&http_request.overrideMimeType("text/html");else if(window.ActiveXObject)try{http_request=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{http_request=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}return http_request?http_request:(alert("Cannot create XMLHTTP instance"),!1)},setValidationReady=function(){validationReady=!0},getHttpResponse=function(e){if(e&&4==e.readyState){if(200==e.status)return response=e.responseText;throw"Problem retrieving XML data"}},evalHttpResponse=function(http_request){eval(getHttpResponse(http_request))},evalFormResponse=function(formElement,response){eval(response),formElement.removeChild(Rum.id(formElement.getAttribute("id")+"__async")),formElement.setAttribute("target","")},createFrame=function(e,t){var i="f"+Math.floor(99999*Math.random()),n=document.createElement("DIV"),o=document.getElementById(e.getAttribute("id")+"__async_postback");o&&o.parentNode.removeChild(o),n.id=e.getAttribute("id")+"__async_postback",n.innerHTML='<iframe style="display:none" src="about:blank" id="'+i+'" name="'+i+'" onload="Rum.documentLoaded(Rum.id(\''+e.getAttribute("id")+"'), '"+i+"'); return true;\"></iframe>",document.body.appendChild(n);var a=document.getElementById(i);a.completeCallback=t;var s=document.createElement("input");s.setAttribute("type","hidden"),s.setAttribute("name",asyncParam),s.setAttribute("value","1"),s.setAttribute("id",e.getAttribute("id")+"__async"),e.appendChild(s),e.setAttribute("target",i)},setText=function(e,t){if(e){if(e.hasChildNodes())for(;e.childNodes.length>=1;)e.removeChild(e.firstChild);var i=document.createElement("span");t.length>0?(i.appendChild(document.createTextNode(t)),e.style.display="block"):(i.appendChild(document.createTextNode("")),e.style.display="none"),e.appendChild(i)}},hasText=function(e){return e&&e.hasChildNodes()&&e.childNodes.length>=1&&e.childNodes[0].textContent.length>0?!0:null},addListener=function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent?e.attachEvent("on"+t,i):e["on"+t]=i},setOpacity=function(e,t){0===t?e.parentNode.removeChild(e):(e.style.opacity=t,e.style.MozOpacity=t,e.style.KhtmlOpacity=t,e.style.filter="alpha(opacity="+100*t+");")},createTimeoutHandler=function(e,t){return function(){setOpacity(e,t)}},fadeOut=function(e,t){var i=20;t||(t=1e3);for(var n=1;i>=n;n++)setTimeout(createTimeoutHandler(e,1-n/i),n/i*t)}};